---
import { givebutterCampaign } from "../config/tickets";

interface Props {
  date: string;
  location: string;
  venue: string;
  description: string;
  attendees: string;
  videoSrc?: string;
}

const { date, location, venue, attendees, videoSrc } = Astro.props;
---

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const styleHeroButton = () => {
      const heroSection = document.querySelector('.hero-section');
      if (!heroSection) return;

      heroSection.querySelectorAll('givebutter-button').forEach(gb => {
        let button = gb.shadowRoot
          ? gb.shadowRoot.querySelector('button[slot="invoker"]')
          : gb.querySelector('button[slot="invoker"]');

        if (button) {
          button.style.setProperty('width', '100%', 'important');
          button.style.setProperty('min-width', '100%', 'important');
          button.style.setProperty('max-width', '100%', 'important');
          button.style.setProperty('padding', '1rem 2.5rem', 'important');
          button.style.setProperty('font-size', '1.125rem', 'important');
          button.style.setProperty('font-weight', '600', 'important');
          button.style.setProperty('height', 'auto', 'important');
          button.style.setProperty('min-height', 'auto', 'important');
          button.classList.remove('h-4', 'w-fit');
        }
      });
    };

    setTimeout(styleHeroButton, 100);
    setTimeout(styleHeroButton, 500);
  });
</script>

<section class="hero-section relative text-dark overflow-hidden h-[800px]">
  <div class="absolute inset-0 bg-textured-light -z-10"></div>
  <div class="container mx-auto max-w-8xl px-6 py-12 lg:py-0">
    <div class="flex flex-col lg:flex-row gap-8 lg:gap-12 lg:items-center lg:min-h-[800px]">
      <!-- Left: Text Content -->
      <div class="w-full lg:w-[50%] text-left space-y-8">
        <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold tracking-tight leading-none">
          THE MIDWEST'S LARGEST<br /><span class="text-primary">SOFTWARE QUALITY</span><br />CONFERENCE
        </h1>

        <!-- Conference Stats -->
        <div class="flex flex-wrap items-center gap-8 py-6">
          <div class="text-center">
            <div class="text-m md:text-xl font-bold">{date}</div>
          </div>
          <div class="w-px h-20 bg-primary"></div>
          <div class="text-center">
            <div class="text-m md:text-xl font-bold">{venue}</div>
            <div class="text-m md:text-xl font-bold">{location}</div>
          </div>
          <div class="hidden sm:block w-px h-20 bg-primary"></div>
          <div class="hidden sm:block text-center">
            <div class="text-m md:text-xl font-bold">{attendees}</div>
            <div class="text-m md:text-xl font-bold">Attendees</div>
          </div>
        </div>
        <div class="w-full max-w-md">
          <givebutter-button
            campaign={givebutterCampaign}
            label="GET TICKETS"
            background-color="#3148F6"
            label-color="#FFFFFF"
            border-radius="8"
            drop-shadow="true"
            icon="none"
          ></givebutter-button>
        </div>
      </div>

      <!-- Right: Video -->
      {videoSrc && (
        <div class="w-full lg:w-[50%]">
          <div class="relative h-[400px] md:h-[500px] lg:h-[780px] rounded-2xl overflow-hidden">
            <video
              autoplay
              loop
              muted
              playsinline
              class="w-full h-full object-cover"
            >
              <source src={videoSrc} type="video/webm" />
              <source src={videoSrc.replace('.webm', '.mp4')} type="video/mp4" />
            </video>
          </div>
        </div>
      )}
    </div>
  </div>
</section>
